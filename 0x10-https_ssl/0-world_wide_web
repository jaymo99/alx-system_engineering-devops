#!/usr/bin/env bash
# Displays information about subdomains.
# shellcheck disable=SC2086
if [ -n "$2" ]; then
	subdomains=$2
else
	subdomains=("www" "lb-01" "web-01" "web-02")
fi

lookup_dns () {
	dns_result=$(dig "$1" | grep -A1 'ANSWER SECTION:')
	awk -v sub_d=$subdomain '{ getline; print "The subdomain " sub_d " is a " $4 " record and points to " $NF}' <<< $dns_result
}

if [ -n "$1" ]; then
	domain=$1
	for subdomain in "${subdomains[@]}";do
		lookup_dns "$subdomain"."$domain"
	done
fi
